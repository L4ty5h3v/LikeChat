# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Notifications —á–µ—Ä–µ–∑ MiniKit SDK

## ‚úÖ –ß—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `lib/farcaster-notifications.ts`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `pages/buyToken.tsx`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useFarcasterAuth()` –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞

### 2. –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –º—ã –≤ iframe Farcaster Mini App
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç SDK
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ fallback –º–µ—Ç–æ–¥—ã (sendNotification, notify, createNotification, openUrl)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ buyToken.tsx
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ MCT
- ‚úÖ –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: mctReceived, PURCHASE_AMOUNT_USDC, username
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∞–º–∏ –≤ –∫–æ–Ω—Å–æ–ª—å

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã notifications
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Farcaster Mini App (Warpcast)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∫—É–ø–∫—É —Ç–æ–∫–µ–Ω–æ–≤ (swap USDC ‚Üí MCT)
4. –î–æ–∂–¥–∞—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è swap
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ª–æ–≥–æ–≤:
   - `‚úÖ [NOTIFICATION] Purchase notification sent successfully` (—É—Å–ø–µ—Ö)
   - –∏–ª–∏ `‚ö†Ô∏è [NOTIFICATION] Failed to send purchase notification: ...` (–æ—à–∏–±–∫–∞ —Å –¥–µ—Ç–∞–ª—è–º–∏)
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ—è–≤–∏–ª–æ—Å—å –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ app feed

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ SDK
–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
- `‚úÖ [NOTIFICATION] Sent via sendNotification` - –µ—Å–ª–∏ –º–µ—Ç–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω
- `‚úÖ [NOTIFICATION] Sent via notify` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥
- `‚úÖ [NOTIFICATION] Sent via createNotification` - –µ—â–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç
- `‚ÑπÔ∏è [NOTIFICATION] Direct notification method not available, using openUrl fallback` - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è fallback

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
- **Title**: "üéâ MCT Tokens Purchased!"
- **Text**: "@username successfully purchased X.XXXX MCT tokens for 0.10 USDC"
- **URL**: –°—Å—ã–ª–∫–∞ –Ω–∞ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∏–ª–∏ –Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –µ—Å–ª–∏ –µ—Å—Ç—å txHash)
- **Image**: `/mrs-crypto.png`

### –¢–µ—Å—Ç 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–ï—Å–ª–∏ SDK –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –º–µ—Ç–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω:
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ —É–ø–∞—Å—Ç—å
- Swap –≤—Å–µ —Ä–∞–≤–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å–ø–µ—à–Ω—ã–º
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/submit` –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–∏–∑–æ–π—Ç–∏ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã

## üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –õ–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø–æ–∫—É–ø–∫–µ:
```
‚úÖ Balance increased! Swap completed successfully
üìä Balance: X.XXXX ‚Üí Y.YYYY MCT (received: Z.ZZZZ MCT)
‚úÖ Token purchase marked in database
‚úÖ [NOTIFICATION] Purchase notification sent successfully
‚úÖ [NOTIFICATION] Sent via [–º–µ—Ç–æ–¥ SDK]
```

### –õ–æ–≥–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ notification:
```
‚úÖ Balance increased! Swap completed successfully
üìä Balance: X.XXXX ‚Üí Y.YYYY MCT (received: Z.ZZZZ MCT)
‚úÖ Token purchase marked in database
‚ö†Ô∏è [NOTIFICATION] Failed to send purchase notification: [–æ—à–∏–±–∫–∞]
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:

1. **SDK –º–µ—Ç–æ–¥—ã –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Ä—Å–∏–∏ Farcaster Mini App SDK
   - –ö–æ–¥ –ø—Ä–æ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ —Å fallback
   - –ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç flow

2. **txHash –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** –∏–∑ `useSwapToken` hook
   - –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `undefined`
   - –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ—è–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ txHash, –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—ã–∑–æ–≤

3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ Farcaster Mini App**
   - –í –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ –±—É–¥–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è
   - –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –ï—Å–ª–∏ notifications —Ä–∞–±–æ—Ç–∞—é—Ç:
   - ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å notifications –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–æ–±—ã—Ç–∏–π (–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á, –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏)

2. –ï—Å–ª–∏ notifications –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é SDK –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã
   - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ API
   - –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ fallback –º–µ—Ç–æ–¥—ã

