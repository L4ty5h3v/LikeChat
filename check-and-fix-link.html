<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏</title></head>
<body style="font-family:Arial;max-width:600px;margin:50px auto;padding:20px">
<h1>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏</h1>
<p>–¢–æ–∫–µ–Ω: <code>0xbe705864202df9a6c7c57993fde1865ae67825ce</code></p>
<button onclick="check()" style="padding:15px 30px;font-size:16px;background:#2196F3;color:white;border:none;border-radius:5px;cursor:pointer;margin:5px">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
<button onclick="fix()" style="padding:15px 30px;font-size:16px;background:#4CAF50;color:white;border:none;border-radius:5px;cursor:pointer;margin:5px">–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
<div id="result" style="margin-top:20px;padding:15px;border-radius:5px;display:none;white-space:pre-wrap;font-family:monospace"></div>
<script>
const tokenAddress='0xbe705864202df9a6c7c57993fde1865ae67825ce';
async function check(){
const r=document.getElementById('result');r.style.display='block';r.style.background='#e3f2fd';r.style.color='#1565c0';
r.textContent='–ü—Ä–æ–≤–µ—Ä—è—é...';
try{
const res=await fetch('/api/tasks?taskType=support');
const data=await res.json();
const links=data.links||[];
const found=links.find(l=>l.token_address?.toLowerCase()===tokenAddress.toLowerCase());
if(found){
r.style.background='#d4edda';r.style.color='#155724';
r.textContent='‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞–π–¥–µ–Ω–∞!\n\n'+JSON.stringify(found,null,2);
}else{
r.style.background='#fff3cd';r.style.color='#856404';
r.textContent='‚ö†Ô∏è –°—Å—ã–ª–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Å–ø–∏—Å–∫–µ.\n\n–í—Å–µ–≥–æ —Å—Å—ã–ª–æ–∫: '+links.length+'\n\n–ü–µ—Ä–≤—ã–µ —Å—Å—ã–ª–∫–∏:\n'+JSON.stringify(links.slice(0,3),null,2);
}
}catch(e){
r.style.background='#f8d7da';r.style.color='#721c24';
r.textContent='‚ùå –û—à–∏–±–∫–∞: '+e.message;
}
}
async function fix(){
const r=document.getElementById('result');r.style.display='block';r.style.background='#fff3cd';r.style.color='#856404';
r.textContent='–ò—Å–ø—Ä–∞–≤–ª—è—é —Å—Å—ã–ª–∫—É...';
try{
// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π cast_url
const castUrl='https://base.app/content/'+btoa(String.fromCharCode(...new Uint8Array([0x12,0x2a,0x0a,0x28,0x0a,0x18,0x6e,0x65,0x74,0x77,0x6f,0x72,0x6b,0x73,0x2f,0x62,0x61,0x73,0x65,0x2d,0x6d,0x61,0x69,0x6e,0x6e,0x65,0x74,0x12,0x0c,0x30,0x78,0x62,0x65,0x37,0x30,0x35,0x38,0x36,0x34,0x32,0x30,0x32,0x64,0x66,0x39,0x61,0x36,0x63,0x37,0x63,0x35,0x37,0x39,0x39,0x33,0x66,0x64,0x65,0x31,0x38,0x36,0x35,0x61,0x65,0x36,0x37,0x38,0x32,0x35,0x63,0x65])).replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/g,'');
const res=await fetch('/api/pin-link',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tokenAddress,position:5,castUrl})});
const data=await res.json();
if(res.ok){
r.style.background='#d4edda';r.style.color='#155724';
r.textContent='‚úÖ –°—Å—ã–ª–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!\n\n'+JSON.stringify(data,null,2);
}else{
r.style.background='#f8d7da';r.style.color='#721c24';
r.textContent='‚ùå –û—à–∏–±–∫–∞: '+data.error+' '+data.message;
}
}catch(e){
r.style.background='#f8d7da';r.style.color='#721c24';
r.textContent='‚ùå –û—à–∏–±–∫–∞: '+e.message;
}
}
</script>
</body>
</html>
