# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç `test-comment-verification.mjs` —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —á–µ—Ä–µ–∑ –≤—Å–µ 4 –º–µ—Ç–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `dotenv`:

```bash
npm install dotenv
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
node test-comment-verification.mjs <castUrl> <userFid>
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `castUrl` - URL –∫–∞—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://warpcast.com/dwr/0x123...`)
- `userFid` - FID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã–ª –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

### –ü—Ä–∏–º–µ—Ä:

```bash
node test-comment-verification.mjs "https://warpcast.com/dwr/0x1234567890abcdef1234567890abcdef12345678" 12345
```

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∫—Ä–∏–ø—Ç

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —á–µ—Ä–µ–∑ 4 –º–µ—Ç–æ–¥–∞:

1. **–ú–µ—Ç–æ–¥ 1**: Cast endpoint —Å replies
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `cast.replies.casts`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `cast.replies`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `cast.direct_replies`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `cast.thread.casts`

2. **–ú–µ—Ç–æ–¥ 2**: Replies endpoint
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `/v2/farcaster/cast/replies`

3. **–ú–µ—Ç–æ–¥ 3**: Parent hash –ø–æ–∏—Å–∫
   - –ò—â–µ—Ç –≤—Å–µ –∫–∞—Å—Ç—ã —Å `parent_hash` —Ä–∞–≤–Ω—ã–º hash –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–∞—Å—Ç–∞

4. **–ú–µ—Ç–æ–¥ 4**: User casts –ø–æ–∏—Å–∫
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∫–∞—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –¥–∞–Ω–Ω–æ–º—É –∫–∞—Å—Ç—É

## –í—ã–≤–æ–¥

–°–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
- –ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –°–∫–æ–ª—å–∫–æ replies –Ω–∞–π–¥–µ–Ω–æ
- –î–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–≥–æ reply (author FID, hash, —Ç–µ–∫—Å—Ç)
- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞
- –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
=====================================
Cast URL: https://warpcast.com/dwr/0x123...
User FID: 12345

üîç –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ hash –∏–∑ URL...
[getFullCastHash] –†–∞–∑—Ä–µ—à–∞–µ–º URL —á–µ—Ä–µ–∑ API: https://warpcast.com/dwr/0x123...
[getFullCastHash] ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω hash: 0x1234567890abcdef...

üîç –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤...
[checkUserCommented] –ú–µ—Ç–æ–¥ 1 - –ø—Ä–æ–≤–µ—Ä–∫–∞ cast —Å replies
[checkUserCommented] –ú–µ—Ç–æ–¥ 1 - –Ω–∞–π–¥–µ–Ω–æ replies –≤ cast { repliesCount: 5, ... }
[checkUserCommented] Reply 1: { authorFid: 12345, userFid: 12345, match: true, ... }
[checkUserCommented] ‚úÖ –ù–∞–π–¥–µ–Ω–æ —á–µ—Ä–µ–∑ cast.replies

=====================================
üìä –†–ï–ó–£–õ–¨–¢–ê–¢:
=====================================
Cast URL: https://warpcast.com/dwr/0x123...
Hash: 0x1234567890abcdef...
User FID: 12345
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–∞–π–¥–µ–Ω: ‚úÖ –î–ê

‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω! –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É—Å–ø–µ—à–Ω–æ –Ω–∞–π–¥–µ–Ω.
```

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- –ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –±—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã
- –°–∫–æ–ª—å–∫–æ replies –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –∫–∞–∂–¥–æ–º –º–µ—Ç–æ–¥–µ
- –î–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–≥–æ reply –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –§–∞–π–ª `.env.local` —Å `NEYNAR_API_KEY`
- Node.js —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ES modules
- –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Neynar API

